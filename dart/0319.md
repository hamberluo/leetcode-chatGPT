题目编号：319

题目：灯泡开关

难度：中等

考察范围：数学、逻辑

题干：初始时有 n 个灯泡关闭。第 1 轮，你打开所有的灯泡。第 2 轮，每两个灯泡你关闭一次。第 3 轮，每三个灯泡切换一次开关（如果关闭则打开，如果打开则关闭）。第 i 轮，每 i 个灯泡切换一次开关。对于第 n 轮，你只切换最后一个灯泡的开关。找出 n 轮后有多少个亮着的灯泡。

解题思路：对于第 i 个灯泡，它会在第 j 轮被切换开关，当且仅当 j 是 i 的因数。因此，对于第 i 个灯泡，我们需要找到它的因数个数。如果因数个数是奇数，那么灯泡就会亮着，否则灯泡就会关闭。而对于第 i 个灯泡，它有 i 个因数，因为 i 可以分解成 p1^k1 * p2^k2 * ... * pm^km 的形式，其中 p1, p2, ..., pm 是不同的质数，那么 i 的因数个数就是 (k1+1) * (k2+1) * ... * (km+1)。

解决方案：

```dart
int bulbSwitch(int n) {
  return sqrt(n).toInt();
}
```

算法复杂度：时间复杂度为 O(1)，空间复杂度为 O(1)。