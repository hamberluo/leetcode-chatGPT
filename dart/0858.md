题目编号：858

题目：镜面反射

难度：中等

考察范围：数学、几何

题干：有一个无限长的数字化的镜面，从左到右标号为 1，2，3 ...，每个整数点处都有一面镜子。例如，第一面镜子是在 (1,0) 处，第二面镜子是在 (2,0) 处，第三面镜子是在 (3,0) 处，等等。

现在，有一个光源从左侧的 (0,2) 处射出，该光源每秒钟可以发射一次光线。每次发射的光线将会沿着与 x 轴正方向夹角为 45 度的方向射出。因为光线在镜子处会被反射，所以它最终将会落在某个整数点上。我们将光线从初始点 (0,2) 发射出 k 次，它最终落在第 n 个镜子上，求 n。

解题思路：本题是一道数学题，需要用到一些几何知识。我们可以将光线的路径看作一条直线，每次碰到镜子时，都会按照反射定律进行反射。因为光线与镜面的夹角为 45 度，所以每次反射后，光线的方向都会旋转 90 度。因此，我们可以将光线的路径看作一条直线，每次碰到镜子时，都会按照反射定律进行反射，并且方向会旋转 90 度。最终，光线会落在某个整数点上，我们需要求出这个整数点的坐标。

我们可以将光线的路径分为两个部分：从起点到第一个镜子的路径和从最后一个镜子到落点的路径。从起点到第一个镜子的路径是一条直线，可以用斜率和截距表示。从最后一个镜子到落点的路径也是一条直线，可以用斜率和截距表示。因此，我们可以先求出从起点到第一个镜子的路径的斜率和截距，然后根据反射定律求出从第一个镜子到最后一个镜子的路径的斜率和截距，最后根据落点的坐标求出 n。

解决方案：

```dart
int mirrorReflection(int p, int q) {
  int k = 1;
  while (k * q % p != 0) {
    k++;
  }
  int n = k * q ~/ p;
  if (n % 2 == 0) {
    return 2;
  } else if (k % 2 == 0) {
    return 0;
  } else {
    return 1;
  }
}
```

算法复杂度：时间复杂度为 O(p)，空间复杂度为 O(1)。