题目编号：552

题目：学生出勤记录 II

难度：困难

考察范围：动态规划

题干：给定一个正整数 n，表示学生的出勤记录表的大小。记录表由学生的编号和出勤记录组成，记录表中的出勤记录被表示为字符 'A'（缺勤），'L'（迟到），或者 'P'（到场）。如果学生能够同时满足下面两个条件，则可以获得出勤奖励：

按总出勤计，学生缺勤（'A'）严格少于两天。
学生不会存在连续 3 天或 3 天以上的迟到（'L'）记录。
如果学生可以获得出勤奖励，返回 true；否则，返回 false。

解题思路：本题可以使用动态规划来解决。我们可以定义一个三维数组 dp，其中 dp[i][j][k] 表示前 i 天有 j 个 'A'，且结尾有连续 k 个 'L' 的出勤记录的方案数。根据题目要求，我们可以得到状态转移方程：

dp[i][j][0] = dp[i-1][j][0] + dp[i-1][j][1] + dp[i-1][j][2]
dp[i][j][1] = dp[i-1][j][0]
dp[i][j][2] = dp[i-1][j][1]
dp[i][j+1][0] = dp[i-1][j][0] + dp[i-1][j][1] + dp[i-1][j][2]

其中，dp[i][j][0] 表示第 i 天是 'P' 的情况，dp[i][j][1] 表示第 i 天是 'L' 的情况，dp[i][j][2] 表示第 i 天是 'LL' 的情况，dp[i][j+1][0] 表示第 i 天是 'A' 的情况。

最终的答案即为 dp[n][0][0] + dp[n][0][1] + dp[n][0][2] + dp[n][1][0] + dp[n][1][1] + dp[n][1][2]。

解决方案：

```dart
bool checkRecord(int n) {
  const int MOD = 1000000007;
  List<List<List<int>>> dp = List.generate(n + 1, (_) => List.generate(2, (_) => List.generate(3, (_) => 0)));
  dp[0][0][0] = 1;
  for (int i = 1; i <= n; i++) {
    // 当前是 'P' 的情况
    for (int j = 0; j <= 1; j++) {
      for (int k = 0; k <= 2; k++) {
        dp[i][j][0] = (dp[i][j][0] + dp[i - 1][j][k]) % MOD;
      }
    }
    // 当前是 'L' 的情况
    for (int j = 0; j <= 1; j++) {
      for (int k = 0; k <= 1; k++) {
        dp[i][j][1] = (dp[i][j][1] + dp[i - 1][j][k]) % MOD;
      }
    }
    // 当前是 'LL' 的情况
    for (int j = 0; j <= 1; j++) {
      dp[i][j][2] = dp[i - 1][j][1];
    }
    // 当前是 'A' 的情况
    for (int k = 0; k <= 2; k++) {
      dp[i][1][0] = (dp[i][1][0] + dp[i - 1][0][k]) % MOD;
    }
  }
  int sum = 0;
  for (int j = 0; j <= 1; j++) {
    for (int k = 0; k <= 2; k++) {
      sum = (sum + dp[n][j][k]) % MOD;
    }
  }
  return sum;
}
```

算法复杂度：时间复杂度为 O(n)，空间复杂度为 O(n)。