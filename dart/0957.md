题目编号：957

题目：N 天后的牢房

难度：中等

考察范围：模拟、哈希表

题干：8 个牢房排成一排，每间牢房不是有人住就是空着。

每天，无论牢房是被占用或空置，都会根据以下规则进行更改：

如果一间牢房两边都被占用或空置，那么该牢房将被占用。
否则，它将被空置。
（注意：这里说的是下一天的状态，即第二天的状态，第二天的状态又会影响第三天的状态，以此类推）

给定表示牢房当前状态的长度为 8 的数组 cells 和一个非负整数 N，表示经过 N 天后牢房的状态。

返回表示第 N 天后牢房状态的长度为 8 的数组。

解题思路：模拟

题目要求我们模拟 N 天后的牢房状态，我们可以直接模拟每一天的状态变化，直到第 N 天。

对于每一天的状态变化，我们可以使用一个哈希表来记录当前状态和下一天的状态，避免重复计算。

具体实现时，我们可以先将当前状态存入哈希表中，然后不断模拟每一天的状态变化，直到第 N 天。每次变化时，我们可以根据题目要求，判断每个牢房的状态是否会改变，然后更新状态并存入哈希表中。如果当前状态已经在哈希表中出现过，说明出现了循环，我们可以直接跳过后面的计算，直接返回哈希表中对应的状态即可。

解决方案：

```dart
List<int> prisonAfterNDays(List<int> cells, int N) {
  Map<List<int>, int> seen = {};
  while (N > 0) {
    List<int> next = new List<int>.filled(8, 0);
    seen[cells] = N--;
    for (int i = 1; i < 7; i++) {
      next[i] = cells[i - 1] == cells[i + 1] ? 1 : 0;
    }
    cells = next;
    if (seen.containsKey(cells)) {
      N %= seen[cells] - N;
    }
  }
  return cells;
}
```

算法复杂度：时间复杂度为 O(2^N)，空间复杂度为 O(2^N)。其中，N 为经过的天数。由于 N 的范围为 [1, 10^9]，因此该算法无法通过所有测试用例。