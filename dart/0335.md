题目编号：335

题目：路径交叉

难度：困难

考察范围：数学、模拟

题干：给定一个含有 n 个正整数的数组 x。从点 (0,0) 开始，先向北移动 x[0] 米，然后向西移动 x[1] 米，向南移动 x[2] 米，向东移动 x[3] 米，持续进行这样的移动。也就是说，每次移动后你的方位会逆时针变化。

编写一个 O(n) 时间复杂度的算法，判断你所经过的路径是否相交。

示例 1:

输入: [2,1,1,2]
输出: true 

示例 2:

输入: [1,2,3,4]
输出: false 

示例 3:

输入: [1,1,1,1]
输出: true 

解题思路：根据题目要求，我们需要判断路径是否相交，那么我们可以考虑路径相交的情况，如下图所示：

![路径相交示意图](https://assets.leetcode-cn.com/solution-static/335/335_fig1.png)

我们可以发现，路径相交的情况只有以下两种：

1. 第一条线段和第三条线段相交，同时第二条线段和第四条线段相交；
2. 第一条线段和第四条线段相交，同时第二条线段和第三条线段相交。

那么我们只需要判断这两种情况是否成立即可。

解决方案：

```dart
bool isSelfCrossing(List<int> x) {
  int len = x.length;
  if (len <= 3) {
    return false;
  }
  for (int i = 3; i < len; i++) {
    if (x[i] >= x[i - 2] && x[i - 1] <= x[i - 3]) {
      return true;
    }
    if (i >= 4 && x[i - 1] == x[i - 3] && x[i] + x[i - 4] >= x[i - 2]) {
      return true;
    }
    if (i >= 5 &&
        x[i - 2] >= x[i - 4] &&
        x[i] + x[i - 4] >= x[i - 2] &&
        x[i - 1] >= x[i - 3] &&
        x[i - 1] <= x[i - 3] + x[i - 5] &&
        x[i - 1] + x[i - 5] >= x[i - 3]) {
      return true;
    }
  }
  return false;
}
```

算法复杂度：时间复杂度为 O(n)，空间复杂度为 O(1)。