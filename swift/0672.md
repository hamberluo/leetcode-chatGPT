题目编号：672

题目：灯泡开关 Ⅱ

难度：中等

考察范围：数学、逻辑

题干：房间里有 n 个灯泡，编号从 1 到 n，最初时所有灯都是关着的。

第 1 轮，你打开所有的灯。

第 2 轮，每两个灯你关闭一次。

第 3 轮，每三个灯切换一次开关（如果关闭则打开，如果打开则关闭）。

第 i 轮，每 i 个灯切换一次开关。

对于第 n 轮，你只切换最后一个灯的开关。

找出 n 轮后有多少个亮着的灯泡。

解题思路：观察题目，可以发现只有当灯泡被操作了奇数次才会亮着，偶数次则会关闭。而每个灯泡被操作的次数就是它的因数个数。因此，我们只需要找到每个灯泡的因数个数，判断是否为奇数即可。

但是，我们可以发现，当 n 足够大时，每个灯泡的因数个数都是偶数，因为每个因数都是成对出现的。但是，当 n 为完全平方数时，它的因数个数为奇数，因为它有一个因数只出现了一次，即它的平方根。因此，我们只需要找到 n 中完全平方数的个数即可。

解决方案：

```swift
class Solution {
    func bulbSwitch(_ n: Int) -> Int {
        return Int(sqrt(Double(n)))
    }
}
```

算法复杂度：时间复杂度为 O(1)，空间复杂度为 O(1)。