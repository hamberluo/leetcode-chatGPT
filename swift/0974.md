题目编号：974

题目：和可被 K 整除的子数组

难度：中等

考察范围：前缀和、哈希表

题干：给定一个整数数组 A，返回其中元素之和可被 K 整除的（连续、非空）子数组的数目。

解题思路：使用前缀和和哈希表来解决此问题。首先，我们需要知道一个性质：如果两个前缀和 mod K 的值相等，那么这两个前缀和之间的元素之和是 K 的倍数。因此，我们可以使用哈希表来存储前缀和 mod K 的值以及该值出现的次数。对于每个元素，我们计算当前的前缀和，然后计算前缀和 mod K 的值，如果该值已经在哈希表中出现过，那么说明存在一个前缀和与当前前缀和 mod K 的值相等，我们可以将该前缀和与当前前缀和之间的元素之和加入答案中。最后，我们将当前前缀和 mod K 的值在哈希表中出现的次数加一。

解决方案：

```swift
func subarraysDivByK(_ A: [Int], _ K: Int) -> Int {
    var map = [0: 1] // 初始化哈希表，前缀和为0的出现了1次
    var sum = 0 // 当前的前缀和
    var ans = 0 // 答案
    for num in A {
        sum += num // 计算当前的前缀和
        let mod = (sum % K + K) % K // 计算前缀和 mod K 的值
        if let count = map[mod] { // 如果该值已经在哈希表中出现过
            ans += count // 将该前缀和与当前前缀和之间的元素之和加入答案中
            map[mod] = count + 1 // 将当前前缀和 mod K 的值在哈希表中出现的次数加一
        } else {
            map[mod] = 1 // 将当前前缀和 mod K 的值在哈希表中出现的次数设为1
        }
    }
    return ans
}
```

算法复杂度：时间复杂度为 O(n)，空间复杂度为 O(min(n, K))。