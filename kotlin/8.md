题目编号：8

题目：字符串转换整数 (atoi)

难度：中等

考察的知识点：字符串、数学

题干：

请你来实现一个 atoi 函数，使其能将字符串转换成整数。

函数需要满足：

1. 读入字符串并丢弃无用的前导空格
2. 检查第一个字符（假设还未到字符末尾）为正号 '+' 或负号 '-' ，读入该字符（注意：只有一个正负号，即不会出现两个正号或者负号），并将该字符对应的数值加入到结果中。之后，读入下一个字符；
3. 读入下一个字符，直到到达下一个非数字字符或到达输入的结尾。字符串的其余部分将被忽略；
4. 将前面步骤读入的数字转换成整数并返回结果；
5. 如果整数数超过 32 位有符号整数范围 [-2^31, 2^31 - 1] ，需要截断这个整数，使其保持在这个范围内。具体来说，小于 -2^31 的整数应该被固定为 -2^31 ，大于 2^31 - 1 的整数应该被固定为 2^31 - 1 。

典型解题思路：

1. 首先去除字符串前面的空格，如果字符串为空则返回 0 ；
2. 判断第一个字符是否为正号 '+' 或负号 '-' ，如果是则记录符号位，指针后移一位；
3. 从当前指针位置开始，依次读取数字字符，直到遇到非数字字符或到达字符串末尾，将读取到的数字字符转换成数字并累加到结果中；
4. 判断结果是否超出 32 位有符号整数范围，如果超出则进行截断；
5. 返回结果。

解决方案（用 kotlin 语言）：

class Solution {
    fun myAtoi(s: String): Int {
        var i = 0
        val n = s.length
        var sign = 1
        var res = 0
        // 去除前面的空格
        while (i < n && s[i] == ' ') {
            i++
        }
        // 判断符号位
        if (i < n && (s[i] == '+' || s[i] == '-')) {
            sign = if (s[i] == '-') -1 else 1
            i++
        }
        // 读取数字字符
        while (i < n && s[i].isDigit()) {
            val digit = s[i] - '0'
            // 判断是否超出 32 位有符号整数范围
            if (res > Int.MAX_VALUE / 10 || (res == Int.MAX_VALUE / 10 && digit > 7)) {
                return if (sign == 1) Int.MAX_VALUE else Int.MIN_VALUE
            }
            res = res * 10 + digit
            i++
        }
        return res * sign
    }
}

算法复杂度：时间复杂度为 O(n)，其中 n 为字符串的长度；空间复杂度为 O(1)。