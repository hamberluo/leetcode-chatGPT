题目编号：765

题目：情侣牵手

难度：困难

考察范围：贪心算法

题干：

N对情侣坐在2N个座位上，其中一些座位上有人。每对情侣都想坐在一起。一个人可以向左或向右移动，但不能跨过另一对情侣。求最少需要交换多少次座位，使得每对情侣都能坐在一起。

解题思路：

本题可以使用贪心算法来解决。我们可以将每对情侣看作一个整体，将座位编号为0到2N-1。对于第i对情侣，他们的座位编号为2i和2i+1。如果第i对情侣坐在了座位j和j+1上，那么我们可以将他们看作是一个整体，将座位j和j+1看作是一个空位。因此，我们可以将所有的空位都放在左边或右边，使得每对情侣都能坐在一起。

具体来说，我们可以从左到右遍历所有的座位，对于每个座位，如果它右边的座位是它所属的情侣的另一个座位，那么我们就跳过这两个座位。否则，我们就找到它所属的情侣的另一个座位，并将它们交换到相邻的位置上。这样，我们就可以将一个空位移到右边，或者将一个空位移到左边。重复这个过程，直到所有的情侣都坐在了一起。

解决方案：

```kotlin
class Solution {
    fun minSwapsCouples(row: IntArray): Int {
        val n = row.size
        val pos = IntArray(n)
        for (i in 0 until n) {
            pos[row[i]] = i
        }
        var ans = 0
        for (i in 0 until n step 2) {
            val x = row[i]
            val y = if (x % 2 == 0) x + 1 else x - 1
            if (row[i + 1] != y) {
                val j = pos[y]
                row[i + 1] = y
                row[j] = row[i + 1]
                pos[y] = i + 1
                pos[row[j]] = j
                ans++
            }
        }
        return ans
    }
}
```

算法复杂度：时间复杂度为O(n)，空间复杂度为O(n)。