题目编号：775

题目：全局倒置与局部倒置

难度：中等

考察范围：数组、数学

题干：给定一个长度为 n 的整数数组 A，其中有两个元素（A[i] 和 A[j]，i != j）可以交换位置。请你交换 A 中这两个元素并返回结果数组。

但是，如果通过交换位置可以使全局和局部两种倒置的数量相等，返回任意满足条件的数组即可。

全局倒置：对于数组中的任意两个下标 i 和 j（i < j），如果满足 i < j 且 A[i] > A[j]，则称这两个元素为一个全局倒置。

局部倒置：对于数组中的任意的下标 i，如果满足 0 <= i < n-1 且 A[i] > A[i+1]，则称这两个元素为一个局部倒置。

解题思路：题目要求交换两个元素，使得全局倒置和局部倒置的数量相等。因为每个局部倒置都是一个全局倒置，所以只需要判断全局倒置的数量是否等于局部倒置的数量即可。

如果交换 A[i] 和 A[j]，那么原来在 A[i] 和 A[j] 之间的数就会被打乱，可能会增加全局倒置的数量。但是，如果 A[i] 和 A[j] 之间的数都比 A[i] 和 A[j] 小，那么交换后全局倒置的数量就会减少。因此，只有当 A[i] 和 A[j] 之间的数都比 A[i] 和 A[j] 小时，才能交换这两个元素。

解决方案：

```java
class Solution {
    public boolean isIdealPermutation(int[] A) {
        int global = 0, local = 0;
        for (int i = 0; i < A.length - 1; i++) {
            if (A[i] > A[i + 1]) {
                local++;
            }
            for (int j = i + 1; j < A.length; j++) {
                if (A[i] > A[j]) {
                    global++;
                }
            }
        }
        return global == local;
    }
}
```

算法复杂度：时间复杂度为 O(n^2)，空间复杂度为 O(1)。