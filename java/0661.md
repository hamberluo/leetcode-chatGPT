题目编号：661

题目：图片平滑器

难度：简单

考察范围：数组、模拟

题干：给你一张图片， represented by a 2D integer array，每个整数表示该点的灰度值（0 ≤ image[i][j] ≤ 255）。你需要将这张图片平滑化，使得每个点的灰度值变成该点周围 8 个位置灰度值的平均值。如果一个位置周围不足 8 个位置（例如，边缘位置），那么就将周围的位置全部视为 0。最后，返回新的图片。

解题思路：对于每个像素点，我们需要计算其周围 8 个位置的灰度值的平均值。由于边缘位置的像素点周围不足 8 个位置，我们可以将其周围的位置全部视为 0。因此，我们可以使用两层循环遍历整张图片，对于每个像素点，计算其周围 8 个位置的灰度值的平均值，并将其赋值给新的图片。

解决方案：

```java
class Solution {
    public int[][] imageSmoother(int[][] M) {
        int m = M.length, n = M[0].length;
        int[][] res = new int[m][n];
        int[][] dirs = {{-1,-1}, {-1,0}, {-1,1}, {0,-1}, {0,0}, {0,1}, {1,-1}, {1,0}, {1,1}};
        for (int i = 0; i < m; i++) {
            for (int j = 0; j < n; j++) {
                int sum = 0, count = 0;
                for (int[] dir : dirs) {
                    int x = i + dir[0], y = j + dir[1];
                    if (x >= 0 && x < m && y >= 0 && y < n) {
                        sum += M[x][y];
                        count++;
                    }
                }
                res[i][j] = sum / count;
            }
        }
        return res;
    }
}
```

算法复杂度：时间复杂度为 O(mn)，其中 m 和 n 分别为图片的行数和列数。空间复杂度为 O(mn)，即为新的图片的空间复杂度。