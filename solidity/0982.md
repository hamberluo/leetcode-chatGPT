题目编号：982

题目：按位与为零的三元组

难度：困难

考察范围：位运算、哈希表

题干：

给定一个整数数组 A，找出索引为 (i, j, k) 的三元组，使得：

0 <= i < A.length
0 <= j < A.length
0 <= k < A.length
A[i] & A[j] & A[k] == 0，其中 & 表示按位与（AND）操作符。
 

示例：

输入：[2,1,3]
输出：12
解释：我们可以选出如下 i, j, k 三元组：
(i=0, j=0, k=1) : 2 & 2 & 1
(i=0, j=1, k=0) : 2 & 1 & 2
(i=0, j=1, k=1) : 2 & 1 & 1
(i=0, j=1, k=2) : 2 & 1 & 3
(i=0, j=2, k=1) : 2 & 3 & 1
(i=1, j=0, k=1) : 1 & 2 & 1
(i=1, j=1, k=0) : 1 & 1 & 2
(i=1, j=1, k=1) : 1 & 1 & 1
(i=1, j=1, k=2) : 1 & 1 & 3
(i=1, j=2, k=1) : 1 & 3 & 1
(i=2, j=0, k=1) : 3 & 2 & 1
(i=2, j=1, k=0) : 3 & 1 & 2
(i=2, j=1, k=1) : 3 & 1 & 1
(i=2, j=1, k=2) : 3 & 1 & 3
(i=2, j=2, k=1) : 3 & 3 & 1

解题思路：

本题需要找到三个数的按位与为零，可以使用哈希表来存储所有可能的按位与结果，然后再遍历数组，找到所有满足条件的三元组。

具体来说，我们可以先预处理出所有可能的按位与结果，然后遍历数组 A，对于每个 A[i]，我们在哈希表中查找所有与 A[i] 按位与为零的数，然后将这些数与 A[i] 组成三元组，计入答案即可。

解决方案：

```solidity
pragma solidity ^0.8.0;

contract Solution {
    function countTriplets(uint[] memory A) public pure returns (uint) {
        uint n = A.length;
        uint[1 << 16] memory cnt;
        for (uint i = 0; i < (1 << 16); i++) {
            for (uint j = 0; j < n; j++) {
                cnt[i & A[j]]++;
            }
        }
        uint ans = 0;
        for (uint i = 0; i < n; i++) {
            for (uint j = 0; j < (1 << 16); j++) {
                if ((j & A[i]) == 0) {
                    ans += cnt[j];
                }
            }
        }
        return ans;
    }
}
```

算法复杂度：时间复杂度为 O(n * 2^16)，空间复杂度为 O(2^16)。