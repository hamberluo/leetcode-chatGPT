题目编号：982

题目：按位与为零的三元组

难度：困难

考察范围：位运算、哈希表

题干：

给定一个整数数组 A，找出索引为 (i, j, k) 的三元组，使得：

0 <= i < A.length
0 <= j < A.length
0 <= k < A.length
A[i] & A[j] & A[k] == 0，其中 & 表示按位与（AND）操作符。
 

示例：

输入：[2,1,3]
输出：12
解释：我们可以选出如下 i, j, k 三元组：
(i=0, j=0, k=1) : 2 & 2 & 1
(i=0, j=1, k=0) : 2 & 1 & 2
(i=0, j=1, k=1) : 2 & 1 & 1
(i=0, j=1, k=2) : 2 & 1 & 3
(i=0, j=2, k=1) : 2 & 3 & 1
(i=1, j=0, k=1) : 1 & 2 & 1
(i=1, j=0, k=2) : 1 & 2 & 3
(i=1, j=1, k=0) : 1 & 1 & 2
(i=1, j=2, k=0) : 1 & 3 & 2
(i=1, j=2, k=1) : 1 & 3 & 1
(i=2, j=0, k=1) : 3 & 2 & 1
(i=2, j=1, k=0) : 3 & 1 & 2

解题思路：

本题可以使用哈希表来解决。首先，我们可以将数组 A 中的所有元素转换为二进制表示，然后将每个元素的二进制表示作为哈希表的键，值为一个数组，存储该元素在数组 A 中的下标。接着，我们可以枚举数组 A 中的每个元素，将其与哈希表中的所有键进行按位与操作，如果结果为 0，则说明存在符合条件的三元组，将对应的下标组合起来即可。

解决方案：

```rust
impl Solution {
    pub fn count_triplets(a: Vec<i32>) -> i32 {
        let n = a.len();
        let mut cnt = vec![0; 1 << 16];
        for i in 0..n {
            cnt[a[i] as usize] += 1;
        }
        let mut res = 0;
        for i in 0..n {
            for j in 0..n {
                let x = a[i] & a[j];
                if x == 0 {
                    res += cnt[0];
                } else {
                    res += cnt[(1 << 16) - 1 - x as usize];
                }
            }
        }
        res as i32
    }
}
```

算法复杂度：时间复杂度为 O(n^2)，空间复杂度为 O(2^16)。