题目编号：634

题目：寻找数组的错位排列

难度：中等

考察范围：数组、数学

题干：给定一个从 1 到 n 排序的整数列表。你需要将这个列表重新排列使得任意相邻的两个元素都不相等。同样需要满足重新排列后的列表为从 1 到 n 排序的整数列表。请你返回满足上述条件的排列的方案数。

解题思路：错排问题，可以使用数学方法解决。错排问题可以转化为排列组合问题，即求出所有排列数减去不符合条件的排列数。不符合条件的排列数即为有至少一个元素与其对应的位置相同的排列数。对于一个元素与其对应位置相同的排列数，可以将该元素与其对应位置的元素交换，然后对剩下的元素进行全排列，最后将该元素与其对应位置的元素交换回来，即可得到所有不符合条件的排列数。因此，错排问题可以转化为求全排列问题，时间复杂度为 O(n!)。

解决方案：

```rust
impl Solution {
    pub fn find_derangement(n: i32) -> i32 {
        if n <= 1 {
            return 0;
        }
        let mut dp = vec![0; (n + 1) as usize];
        dp[2] = 1;
        for i in 3..=n {
            dp[i as usize] = ((i - 1) as i64 * (dp[(i - 1) as usize] + dp[(i - 2) as usize])) % 1000000007;
        }
        dp[n as usize] as i32
    }
}
```

算法复杂度：时间复杂度 O(n)，空间复杂度 O(n)。