题目编号：135

题目：分发糖果

难度：困难

考察范围：贪心算法

题干：给定一个数组，代表每个孩子的评分，现在你需要给这些孩子发糖果，要求如下：

1. 每个孩子至少分配到一个糖果
2. 相邻的孩子中，评分高的孩子必须获得更多的糖果

请计算最少需要多少糖果。

解题思路：首先，我们可以将每个孩子的糖果数初始化为 1，然后从左往右遍历一遍数组，如果右边孩子的评分比左边孩子高，那么右边孩子的糖果数就比左边孩子多一个，这样保证了相邻的孩子中，评分高的孩子获得更多的糖果。然后再从右往左遍历一遍数组，如果左边孩子的评分比右边孩子高，并且左边孩子当前的糖果数不大于右边孩子的糖果数，那么左边孩子的糖果数就更新为右边孩子的糖果数加一，这样保证了相邻的孩子中，评分高的孩子获得更多的糖果。最后，将每个孩子的糖果数累加起来即可。

解决方案：

```rust
impl Solution {
    pub fn candy(ratings: Vec<i32>) -> i32 {
        let n = ratings.len();
        let mut candies = vec![1; n];
        for i in 1..n {
            if ratings[i] > ratings[i - 1] {
                candies[i] = candies[i - 1] + 1;
            }
        }
        let mut ans = candies[n - 1];
        for i in (0..n - 1).rev() {
            if ratings[i] > ratings[i + 1] {
                candies[i] = candies[i].max(candies[i + 1] + 1);
            }
            ans += candies[i];
        }
        ans
    }
}
```

算法复杂度：时间复杂度为 O(n)，空间复杂度为 O(n)。