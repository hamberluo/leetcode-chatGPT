题目编号：927

题目：三等分

难度：困难

考察范围：数组、双指针

题干：

给定一个由 0 和 1 组成的数组 A，将数组分成 3 个非空的部分，使得所有这些部分表示相同的二进制值。

如果可以做到，请返回任何 [i, j]，其中 i+1 < j，这样一来：

A[0], A[1], ..., A[i] 组成第一部分；
A[i+1], A[i+2], ..., A[j-1] 作为第二部分；
A[j], A[j+1], ..., A[A.length - 1] 是第三部分。
这三个部分所表示的二进制值相等。如果无法做到，就返回 [-1, -1]。

注意，在考虑每个部分所表示的二进制值时，应将其看作一个整体。例如，[1,1,0] 表示十进制中的 6，而不会是 3。此外，前导零也是被允许的，所以 [0,1,1] 和 [1,1] 表示相同的值。

解题思路：

首先，我们可以先计算出整个数组的二进制值，如果不能被 3 整除，那么就无法分成三等分，直接返回 [-1, -1]。

然后，我们可以从数组的两端开始，分别找到第一个和第三个部分的起始位置。在找第一个部分的起始位置时，我们需要注意前导零的情况。在找第三个部分的起始位置时，我们需要注意后导零的情况。

最后，我们可以比较第一个部分和第二个部分的二进制值是否相等，如果相等，再比较第二个部分和第三个部分的二进制值是否相等。如果都相等，就返回 [i, j]，否则返回 [-1, -1]。

解决方案：

```go
func threeEqualParts(A []int) []int {
    n := len(A)
    cnt := 0
    for i := 0; i < n; i++ {
        cnt += A[i]
    }
    if cnt == 0 {
        return []int{0, n - 1}
    }
    if cnt % 3 != 0 {
        return []int{-1, -1}
    }
    k := cnt / 3
    i := 0
    for i < n && A[i] == 0 {
        i++
    }
    j := i
    cnt = 0
    for j < n {
        cnt += A[j]
        if cnt == k + 1 {
            break
        }
        j++
    }
    p := j
    for p < n && A[p] == 0 {
        p++
    }
    q := p
    cnt = 0
    for q < n {
        cnt += A[q]
        if cnt == k + 1 {
            break
        }
        q++
    }
    r := q
    for r < n && A[r] == 0 {
        r++
    }
    for r < n {
        if A[i] != A[p] || A[j] != A[q] || A[p] != A[q] {
            return []int{-1, -1}
        }
        i++
        j++
        p++
        q++
        r++
    }
    return []int{i - 1, j}
}
```

算法复杂度：时间复杂度为 O(n)，空间复杂度为 O(1)。