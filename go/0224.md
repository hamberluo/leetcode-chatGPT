题目编号：224

题目：基本计算器

难度：困难

考察范围：栈、数学

题干：

实现一个基本的计算器来计算一个简单的字符串表达式 s 的值。

示例 1：

输入：s = "1 + 1"
输出：2

示例 2：

输入：s = " 2-1 + 2 "
输出：3

示例 3：

输入：s = "(1+(4+5+2)-3)+(6+8)"
输出：23

解题思路：

本题可以使用栈来解决，具体思路如下：

1. 初始化一个栈和一个操作数变量 num，栈用来存储操作数之前的符号，操作数变量用来存储当前操作数的值。

2. 遍历字符串 s，对于每个字符：

   - 如果是数字，更新操作数变量 num。
   
   - 如果是加号，则将操作数变量 num 加入栈中，并将 num 重置为 0，符号设为加号。
   
   - 如果是减号，则将操作数变量 num 加入栈中，并将 num 重置为 0，符号设为减号。
   
   - 如果是左括号，则将当前的操作数和符号入栈，并将操作数变量 num 和符号重置为初始值。
   
   - 如果是右括号，则将栈顶的符号出栈，并根据符号计算栈顶的操作数和当前操作数的值，更新当前操作数的值。
   
3. 遍历完字符串 s 后，将最后一个操作数加入栈中，并根据栈中的符号计算结果。

解决方案：

```go
func calculate(s string) int {
    stack := make([]int, 0) // 存储操作数之前的符号
    num := 0 // 当前操作数的值
    sign := 1 // 当前操作数之前的符号，1 表示加号，-1 表示减号
    res := 0 // 计算结果

    for i := 0; i < len(s); i++ {
        if s[i] >= '0' && s[i] <= '9' { // 如果是数字，更新操作数变量 num
            num = num*10 + int(s[i]-'0')
        } else if s[i] == '+' { // 如果是加号，将操作数变量 num 加入栈中，并将 num 重置为 0，符号设为加号
            res += sign * num
            num = 0
            sign = 1
        } else if s[i] == '-' { // 如果是减号，将操作数变量 num 加入栈中，并将 num 重置为 0，符号设为减号
            res += sign * num
            num = 0
            sign = -1
        } else if s[i] == '(' { // 如果是左括号，将当前的操作数和符号入栈，并将操作数变量 num 和符号重置为初始值
            stack = append(stack, res)
            stack = append(stack, sign)
            res = 0
            sign = 1
        } else if s[i] == ')' { // 如果是右括号，将栈顶的符号出栈，并根据符号计算栈顶的操作数和当前操作数的值，更新当前操作数的值
            res += sign * num
            num = 0
            res *= stack[len(stack)-1]
            stack = stack[:len(stack)-1]
            res += stack[len(stack)-1]
            stack = stack[:len(stack)-1]
        }
    }

    // 遍历完字符串 s 后，将最后一个操作数加入栈中，并根据栈中的符号计算结果
    res += sign * num

    return res
}
```

算法复杂度：时间复杂度为 O(n)，空间复杂度为 O(n)。