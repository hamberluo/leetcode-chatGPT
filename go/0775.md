题目编号：775

题目：全局倒置与局部倒置

难度：中等

考察范围：数组、数学

题干：

给定一个长度为 n 的数组 A，其中有一个元素被替换为另一个值，我们希望找到数组中是否存在一个全局倒置的排列 A，使得它是原数组 A 的局部倒置排列。

如果存在则返回 true，否则返回 false。

解题思路：

题目要求判断是否存在一个全局倒置的排列 A，使得它是原数组 A 的局部倒置排列。因为全局倒置一定是局部倒置，所以我们只需要判断是否存在一个排列 A，使得它是原数组 A 的局部倒置排列即可。

对于一个排列 A，如果它是原数组 A 的局部倒置排列，那么对于任意的 i，如果满足 0 <= i < n-2，都有 A[i] <= A[i+2]。因为如果存在 A[i] > A[i+2]，那么 A[i] 和 A[i+2] 就不是局部倒置了。

而对于一个排列 A，如果它是全局倒置排列，那么对于任意的 i 和 j，如果满足 0 <= i < j < n，都有 A[i] > A[j]。因为如果存在 A[i] <= A[j]，那么 A[i] 和 A[j] 就不是全局倒置了。

所以我们只需要判断是否存在一个 i，使得 A[i] > A[i+1]，那么就一定不存在一个排列 A，使得它是原数组 A 的局部倒置排列。

解决方案：

func isIdealPermutation(A []int) bool {
    for i := 0; i < len(A); i++ {
        if A[i] > A[i+1] {
            if A[i]-A[i+1] > 1 || A[i+2]-A[i+1] > 1 {
                return false
            }
        }
    }
    return true
}

算法复杂度：时间复杂度为 O(n)，空间复杂度为 O(1)。