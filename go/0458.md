题目编号：458

题目：可怜的小猪

难度：困难

考察范围：数学、逻辑思维

题干：

有 buckets 桶液体，其中恰好有一桶含有毒药，其余装的都是水。它们从外观看起来都一样。为了弄清楚哪只水桶含有毒药，你可以喂一些猪喝，通过观察猪是否会死进行判断。不幸的是，你只有 minutesToTest 分钟时间来确定哪桶液体是有毒的。

喂猪的规则如下：

选择若干只活猪进行喂养
可以重复给同一只猪喂食不同的桶的液体，但每只猪都有一个固定的喂养时间 minutesToDie。在这段时间中，只有喝了毒药的桶中的液体会导致猪死亡。
当猪死亡后，不能再次使用它。
使用一只猪测量的时间应当尽量小。
解题思路：

这道题目可以用数学的思路来解决。

首先，我们可以将每只猪的喂养时间看做是一个时间段，比如说 minutesToDie 分钟。那么，我们可以将这个时间段分成若干个小时间段，每个小时间段的长度为 minutesToTest / minutesToDie。这样，我们就可以将每只猪喝的桶的编号看做是一个 k 进制的数，其中 k = minutesToTest / minutesToDie + 1。

假设我们有 x 只猪，那么我们就可以用 x 只猪来表示 k^x 个桶。具体来说，我们可以将每只猪喝的桶的编号看做是一个 x 位的 k 进制数，其中每一位表示这只猪喝的桶的编号在对应的小时间段中是否有毒药。如果这只猪在某个小时间段中喝了有毒药的桶，那么这一位就是 1，否则就是 0。

举个例子，假设 minutesToTest = 60，minutesToDie = 15，那么 k = 5。如果我们有 2 只猪，那么我们就可以用这两只猪来表示 5^2 = 25 个桶。具体来说，我们可以将每只猪喝的桶的编号看做是一个 2 位的 5 进制数，其中第一位表示这只猪喝的桶的编号在前 15 分钟中是否有毒药，第二位表示这只猪喝的桶的编号在后 15 分钟中是否有毒药。比如说，如果第一只猪喝了编号为 6 的桶，第二只猪喝了编号为 8 的桶，那么我们就可以得到一个 2 位的 5 进制数 31，表示这两只猪喝的桶的编号为 31。

那么，我们需要多少只猪呢？我们需要找到一个最小的 x，使得 k^x >= buckets。这个问题可以用对数来解决，具体来说，我们可以用下面的公式来计算 x：

x = ceil(log(buckets) / log(k))

解决方案：

根据上面的思路，我们可以写出下面的代码：

func poorPigs(buckets int, minutesToDie int, minutesToTest int) int {
    k := minutesToTest/minutesToDie + 1
    x := int(math.Ceil(math.Log(float64(buckets))/math.Log(float64(k))))
    return x
}

算法复杂度：时间复杂度为 O(1)，空间复杂度为 O(1)。