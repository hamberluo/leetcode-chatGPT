题目编号：65

题目：有效数字

难度：困难

考察范围：字符串、正则表达式

题干：

给定一个字符串 s ，请判断它是否是一个有效的数字。

有效数字应该满足以下所有条件：

1. 数字可以有前导或后缀空格。
2. 数字可以是正数或负数。
3. 数字可以是整数或小数。
4. 小数点前后都可以有数字，但是小数点前后不能都没有数字。
5. 小数点前后可以有正负号，但是不能同时存在。
6. 小数点前后不能有空格。
7. 数字中间不能有空格。
8. 数字可以是科学计数法，即用科学计数法表示的数字包含正负号、小数点、指数标识符和指数。例如，-1E-16、0123、3.1415926、1E10、-1e-16、1.23e+10 都是有效数字，但是 12e、1.2.3、+-5 和 12e+5.4 都不是有效数字。

解题思路：

本题可以使用正则表达式进行匹配，具体匹配规则如下：

1. 首先去除前导和后缀空格。
2. 判断是否存在正负号，如果存在则去除。
3. 判断是否存在小数点，如果存在则判断小数点前后是否都有数字。
4. 判断是否存在指数标识符，如果存在则判断指数标识符前后是否都有数字。

解决方案：

```go
import "regexp"

func isNumber(s string) bool {
    // 去除前导和后缀空格
    s = regexp.MustCompile(`^\s+|\s+`).ReplaceAllString(s, "")
    if len(s) == 0 {
        return false
    }
    // 判断是否存在正负号，如果存在则去除
    if s[0] == '+' || s[0] == '-' {
        s = s[1:]
    }
    if len(s) == 0 {
        return false
    }
    // 判断是否存在小数点，如果存在则判断小数点前后是否都有数字
    if i := regexp.MustCompile(`\.`).FindStringIndex(s); i != nil {
        if i[0] == 0 && i[1] == len(s) {
            return false
        }
        if i[0] == 0 {
            s = s[i[1]:]
        } else if i[1] == len(s) {
            s = s[:i[0]]
        } else {
            s = s[:i[0]] + s[i[1]:]
        }
    }
    if len(s) == 0 {
        return false
    }
    // 判断是否存在指数标识符，如果存在则判断指数标识符前后是否都有数字
    if i := regexp.MustCompile(`[eE]`).FindStringIndex(s); i != nil {
        if i[0] == 0 || i[1] == len(s) - 1 {
            return false
        }
        if s[i[1]] == '+' || s[i[1]] == '-' {
            s = s[i[1]+1:]
        } else {
            s = s[i[1]:]
        }
    }
    if len(s) == 0 {
        return false
    }
    // 判断剩余部分是否都是数字
    return regexp.MustCompile(`^\d+`).MatchString(s)
}
```

算法复杂度：时间复杂度为 O(n)，其中 n 为字符串 s 的长度。空间复杂度为 O(1)。