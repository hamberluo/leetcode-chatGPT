题目编号：982

题目：按位与为零的三元组

难度：困难

考察范围：位运算、哈希表

题干：

给定一个整数数组 A，找出索引为 (i, j, k) 的三元组，使得：

0 <= i < A.length
0 <= j < A.length
0 <= k < A.length
A[i] & A[j] & A[k] == 0，其中 & 表示按位与（AND）操作符。
 

示例：

输入：[2,1,3]
输出：12
解释：我们可以选出如下 i, j, k 三元组：
(i=0, j=0, k=1) : 2 & 2 & 1
(i=0, j=1, k=0) : 2 & 1 & 2
(i=0, j=1, k=1) : 2 & 1 & 1
(i=0, j=1, k=2) : 2 & 1 & 3
(i=0, j=2, k=1) : 2 & 3 & 1
(i=1, j=0, k=0) : 1 & 2 & 2
(i=1, j=0, k=1) : 1 & 2 & 1
(i=1, j=0, k=2) : 1 & 2 & 3
(i=1, j=1, k=0) : 1 & 1 & 2
(i=1, j=2, k=0) : 1 & 3 & 2
(i=2, j=0, k=1) : 3 & 2 & 1
(i=2, j=1, k=0) : 3 & 1 & 2

解题思路：

本题需要找到三个数的按位与为零，可以考虑使用哈希表来存储所有可能的两个数的按位与的结果，然后再遍历一遍数组，找到第三个数与前两个数的按位与的结果在哈希表中出现的次数即可。

具体来说，我们可以先遍历数组 A，对于任意两个数 A[i] 和 A[j]，计算它们的按位与的结果 A[i] & A[j]，并将这个结果作为键存入哈希表中，值为这个结果在数组 A 中出现的次数。

接下来再遍历一遍数组 A，对于任意一个数 A[k]，我们可以枚举前两个数 A[i] 和 A[j]，计算它们的按位与的结果 A[i] & A[j] & A[k]，并在哈希表中查找这个结果对应的出现次数，将这个次数累加到答案中即可。

解决方案：

```cpp
class Solution {
public:
    int countTriplets(vector<int>& A) {
        int n = A.size();
        unordered_map<int, int> cnt;
        for (int i = 0; i < n; ++i) {
            for (int j = 0; j < n; ++j) {
                ++cnt[A[i] & A[j]];
            }
        }
        int ans = 0;
        for (int i = 0; i < n; ++i) {
            for (auto& [k, v] : cnt) {
                if ((k & A[i]) == 0) {
                    ans += v;
                }
            }
        }
        return ans;
    }
};
```

算法复杂度：时间复杂度为 O(n^2 + 2^w n)，其中 w 为整数的位数，空间复杂度为 O(2^w n)。