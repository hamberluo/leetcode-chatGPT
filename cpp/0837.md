题目编号：837

题目：新21点

难度：中等

考察范围：动态规划

题干：

爱丽丝以 0 分开始，并在她的得分小于 K 分时抽取数字。 抽取时，她从牌堆顶部抽取一张牌，使得她的分数增加牌面的点数。 有些牌堆顶部的牌使得她的分数大于 K 分，因此她弃掉这些牌。

爱丽丝想要得到的分数至少为 K 分。如果她停止抽牌她就获得分数，否则她继续抽牌。她停止抽牌的概率是多少？

解题思路：

这是一道动态规划的题目，我们可以用 dp[i] 表示当前得分为 i 时，获胜的概率。那么我们可以得到以下状态转移方程：

dp[i] = (dp[i+1] + dp[i+2] + ... + dp[i+W]) / W

其中 W 为抽牌的最大点数，当 i >= K 时，dp[i] = 1，因为此时已经获胜了。

我们可以从 dp[K-1] 开始倒推，最终得到 dp[0] 即为所求的概率。

解决方案：

```cpp
class Solution {
public:
    double new21Game(int N, int K, int W) {
        if (K == 0) return 1.0;
        vector<double> dp(K+W);
        for (int i = K; i <= N && i < K+W; i++) {
            dp[i] = 1.0;
        }
        dp[K-1] = 1.0 * min(N-K+1, W) / W;
        for (int i = K-2; i >= 0; i--) {
            dp[i] = dp[i+1] - (dp[i+W+1] - dp[i+1]) / W;
        }
        return dp[0];
    }
};
```

算法复杂度：时间复杂度为 O(N+W)，空间复杂度为 O(N+W)。