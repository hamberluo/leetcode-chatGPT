题目编号：974

题目：和可被 K 整除的子数组

难度：中等

考察范围：前缀和、哈希表

题干：给定一个整数数组 A，返回其中元素之和可被 K 整除的（连续、非空）子数组的数目。

解题思路：使用前缀和和哈希表来解决该问题。

首先，我们可以使用前缀和来计算任意一个子数组的和，即 sum_i = \sum_{j=0}^{i-1} A_j，其中 sum_i 表示前 i 个元素的和。那么，对于任意一个子数组 A_{i,j}，其和可以表示为 sum_j - sum_i。

接着，我们可以使用哈希表来记录每个余数出现的次数。具体来说，我们遍历数组 A，计算前缀和 sum_i，并将 sum_i 对 K 取余数，得到余数 r。然后，我们在哈希表中查找是否存在余数为 r 的前缀和，如果存在，则说明存在一个子数组的和可以被 K 整除，我们将该前缀和出现的次数加入答案中。最后，我们将余数 r 出现的次数加一。

解决方案：

```cpp
class Solution {
public:
    int subarraysDivByK(vector<int>& A, int K) {
        unordered_map<int, int> mp;
        mp[0] = 1; // 初始化，前缀和为 0 的子数组出现了 1 次
        int sum = 0, ans = 0;
        for (int i = 0; i < A.size(); i++) {
            sum += A[i];
            int r = (sum % K + K) % K; // 防止出现负数余数
            if (mp.count(r)) {
                ans += mp[r];
            }
            mp[r]++;
        }
        return ans;
    }
};
```

算法复杂度：时间复杂度为 O(n)，空间复杂度为 O(n)。其中，哈希表的空间复杂度为 O(n)，因为最坏情况下，所有的前缀和都不同。