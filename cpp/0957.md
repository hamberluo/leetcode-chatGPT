题目编号：957

题目：N 天后的牢房

难度：中等

考察范围：模拟、哈希表

题干：

8 个牢房排成一排，每间牢房不是有人住就是空着。

每天，无论牢房是被占用或空置，都会根据以下规则更改：

如果一间牢房两边都被占用或空置，那么该牢房将被占用。
否则，它将被空置。

（请注意，由第一天开始，第 0 天或第 N+1 天的牢房将不会被更改。）

给定数组 cells 表示牢房的初始状态，其中 cells[i] = 1 表示第 i 个牢房被占用，cells[i] = 0 表示第 i 个牢房空置。

你的任务是预测 N 天后牢房的状态。

解题思路：

题目要求我们预测 N 天后牢房的状态，我们可以通过模拟来实现。

我们可以先将牢房的状态存储在一个数组 cells 中，然后模拟 N 天的变化过程。对于每一天，我们需要根据题目给出的规则来更新牢房的状态。具体来说，我们可以使用一个哈希表来记录每一天的牢房状态，如果某一天的状态已经出现过，那么说明我们已经陷入了一个循环，可以直接返回之前的状态。

解决方案：

```cpp
class Solution {
public:
    vector<int> prisonAfterNDays(vector<int>& cells, int N) {
        unordered_map<string, int> mp; // 哈希表，记录每一天的状态
        while (N > 0) {
            vector<int> temp(8, 0); // 临时数组，存储当前天的状态
            string s(cells.begin(), cells.end()); // 将当前天的状态转换为字符串
            if (mp.count(s) > 0) { // 如果当前状态已经出现过，说明陷入了循环，直接返回之前的状态
                int loop_len = mp[s] - N;
                return prisonAfterNDays(cells, N % loop_len);
            }
            mp[s] = N--; // 记录当前状态，并将 N 减一
            for (int i = 1; i < 7; i++) { // 根据规则更新牢房状态
                temp[i] = (cells[i - 1] == cells[i + 1]) ? 1 : 0;
            }
            cells = temp; // 更新当前天的状态
        }
        return cells;
    }
};
```

算法复杂度：时间复杂度为 O(N)，空间复杂度为 O(2^8)。其中，哈希表的空间复杂度为 O(2^8)，因为牢房的状态总共有 2^8 种可能。