题目编号：157

题目：用 Read4 读取 N 个字符

难度：简单

考察范围：字符串、IO

题干：给定一个文件和一个整数 n，你的任务是从文件中读取 n 个字符并将其存储到缓冲区中。你需要实现一个 API int read4(char *buf) 该 API 可以读取 4 个字符并将其存储到 buf 中。返回值是实际读取的字符数。注意 read4() 可能会读取比 4 个字符少的字符，如果文件中的字符数少于 4 个，则它将读取剩余的字符。你的程序应该从文件中读取 n 个字符，然后将其存储到缓冲区 buf 中，最后返回实际读取的字符数。

解题思路：这道题目的难点在于如何处理 read4() 函数返回的字符数和文件中实际的字符数之间的关系。我们可以使用一个指针指向缓冲区的末尾，然后每次调用 read4() 函数时，将返回的字符存储到指针指向的位置，并将指针向后移动。如果 read4() 函数返回的字符数小于 4，则说明文件已经读取完毕，此时我们需要将指针指向的位置截断，以确保缓冲区中只包含实际读取的字符。

解决方案：

```cpp
int read4(char *buf);

class Solution {
public:
    int read(char *buf, int n) {
        int total = 0;
        char *p = buf;
        while (total < n) {
            int count = read4(p);
            if (count == 0) break;
            total += count;
            p += count;
        }
        return min(total, n);
    }
};
```

算法复杂度：时间复杂度为 O(n)，空间复杂度为 O(1)。