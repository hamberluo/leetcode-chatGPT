题目编号：309

题目：最佳买卖股票时机含冷冻期

难度：中等

考察范围：动态规划

题干：给定一个整数数组，其中第 i 个元素代表了第 i 天的股票价格 。​设计一个算法计算出最大利润。在满足以下约束条件下，你可以尽可能地完成更多的交易（多次买卖一支股票）:

你必须在卖出股票之前持有该股票。
你不能同时参与多笔交易（即，你在购买股票之前必须先出售掉之前的股票）。
卖出股票后，你无法在第二天买入股票（即，冷冻期为 1 天）。

解题思路：本题是一道动态规划的题目，我们可以用 dp[i][0] 和 dp[i][1] 分别表示第 i 天持有股票和不持有股票的最大收益。其中，dp[i][0] 可以由 dp[i-1][0] 和 dp[i-1][1]-prices[i] 转移而来，dp[i][1] 可以由 dp[i-1][1] 和 dp[i-2][0]+prices[i] 转移而来。其中，dp[i-2][0] 表示在第 i-2 天卖出股票，因此需要隔一天才能买入股票。

解决方案：

```cpp
class Solution {
public:
    int maxProfit(vector<int>& prices) {
        int n = prices.size();
        if (n < 2) {
            return 0;
        }
        vector<vector<int>> dp(n, vector<int>(2));
        dp[0][0] = -prices[0];
        dp[0][1] = 0;
        dp[1][0] = max(dp[0][0], -prices[1]);
        dp[1][1] = max(dp[0][1], dp[0][0]+prices[1]);
        for (int i = 2; i < n; i++) {
            dp[i][0] = max(dp[i-1][0], dp[i-1][1]-prices[i]);
            dp[i][1] = max(dp[i-1][1], dp[i-2][0]+prices[i]);
        }
        return dp[n-1][1];
    }
};
```

算法复杂度：时间复杂度为 O(n)，空间复杂度为 O(n)。