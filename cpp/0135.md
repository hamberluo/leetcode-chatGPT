题目编号：135

题目：分发糖果

难度：困难

考察范围：贪心算法

题干：给定一个整数数组 ratings，其中 ratings[i] 的表示孩子 i 的评分。你需要给这些孩子分发糖果，规则是如果孩子 i 的评分比孩子 j 高，那么孩子 i 的糖果数量必须比孩子 j 的糖果数量多。求最少需要分发多少糖果。

解题思路：首先，我们可以将每个孩子的糖果数量初始化为 1。然后，我们从左到右遍历一遍数组，如果当前孩子的评分比前一个孩子高，那么当前孩子的糖果数量就比前一个孩子的糖果数量多 1。接着，我们从右到左再遍历一遍数组，如果当前孩子的评分比后一个孩子高，并且当前孩子的糖果数量不大于后一个孩子的糖果数量，那么当前孩子的糖果数量就要比后一个孩子的糖果数量多 1。最后，我们将所有孩子的糖果数量加起来就是最少需要分发的糖果数量。

解决方案：

```cpp
class Solution {
public:
    int candy(vector<int>& ratings) {
        int n = ratings.size();
        vector<int> candy(n, 1); // 初始化每个孩子的糖果数量为 1

        // 从左到右遍历一遍数组
        for (int i = 1; i < n; i++) {
            if (ratings[i] > ratings[i-1]) {
                candy[i] = candy[i-1] + 1;
            }
        }

        // 从右到左遍历一遍数组
        for (int i = n-2; i >= 0; i--) {
            if (ratings[i] > ratings[i+1] && candy[i] <= candy[i+1]) {
                candy[i] = candy[i+1] + 1;
            }
        }

        // 计算总共需要分发的糖果数量
        int sum = 0;
        for (int i = 0; i < n; i++) {
            sum += candy[i];
        }

        return sum;
    }
};
```

算法复杂度：时间复杂度为 O(n)，空间复杂度为 O(n)。