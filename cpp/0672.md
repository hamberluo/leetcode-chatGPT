题目编号：672

题目：灯泡开关 Ⅱ

难度：中等

考察范围：数学、逻辑

题干：有一个房间，墙上挂有 n 只已经打开的灯泡和 4 个按钮。在进行了 m 次未知操作后，你需要返回这 n 只灯泡可能有多少种不同的状态。假设这 n 只灯泡初始状态都是关闭的。

操作 1：将所有灯泡的状态反转（即开变为关，关变为开）
操作 2：将编号为偶数的灯泡的状态反转
操作 3：将编号为奇数的灯泡的状态反转
操作 4：将编号为 3k+1 （k 从 0 开始）的灯泡的状态反转

解题思路：数学、逻辑

对于每个灯泡，我们可以考虑它被操作了几次。对于操作 1，每个灯泡都会被操作一次，所以它们的状态只有两种可能：开或关。对于操作 2，只有编号为偶数的灯泡会被操作，所以它们的状态只有两种可能。同理，对于操作 3 和操作 4，只有编号为奇数和 3k+1 的灯泡会被操作，它们的状态也只有两种可能。

我们可以枚举每个灯泡被操作的次数，然后计算出最终的状态。如果最终状态与初始状态相同，那么这个灯泡的状态就是稳定的。我们可以用一个数组来记录每个灯泡的状态是否稳定。最终，我们只需要统计稳定状态的数量即可。

解决方案：

```cpp
class Solution {
public:
    int flipLights(int n, int m) {
        if (n == 0 || m == 0) {
            return 1;
        }
        if (n == 1) {
            return 2;
        }
        if (n == 2) {
            return m == 1 ? 3 : 4;
        }
        if (m == 1) {
            return 4;
        }
        if (m == 2) {
            return 7;
        }
        return 8;
    }
};
```

算法复杂度：时间复杂度为 O(1)，空间复杂度为 O(1)。