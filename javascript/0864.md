题目编号：864

题目：获取所有键盘输入的时间

难度：中等

考察范围：数组、字符串、哈希表

题干：给定一个字符串 S，表示键盘上的按键顺序，同时给定一个数组 shifts，其中 shifts[i] = x 表示第 i 个按键需要将大小写切换 x 次。例如，按下 Shift 键时，大小写切换次数为 1。我们规定，对于每个字符，按下前，我们都是在小写状态下。如果我们按下 Shift 键，那么我们将在下一次按键时切换大小写，这样我们可以持续切换大小写状态。请你返回我们按下所有键所需要的时间。

解题思路：首先，我们需要将字符串 S 中的每个字符转换为其对应的按键时间。由于我们需要考虑大小写切换的情况，因此我们可以使用一个变量来记录当前的大小写状态，每次遇到 Shift 键时，我们将其大小写状态取反。然后，我们可以使用一个数组来记录每个按键的时间，最后将所有按键时间相加即可。

解决方案：

```javascript
var shiftingLetters = function(S, shifts) {
    let n = S.length;
    let ans = new Array(n);
    let cur = 0;
    for (let i = n - 1; i >= 0; --i) {
        cur += shifts[i];
        ans[i] = (S.charCodeAt(i) - 97 + cur) % 26 + 97;
    }
    return String.fromCharCode(...ans);
};
```

算法复杂度：时间复杂度为 O(n)，空间复杂度为 O(n)。