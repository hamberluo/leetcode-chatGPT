题目编号：309

题目：最佳买卖股票时机含冷冻期

难度：中等

考察范围：动态规划

题干：给定一个整数数组，其中第 i 个元素代表了第 i 天的股票价格 。​ 设计一个算法计算出最大利润。在满足以下约束条件下，你可以尽可能地完成更多的交易（多次买卖一支股票）:

- 你必须在卖出股票之前持有该股票。
- 卖出股票后，你无法在第二天买入股票 (即冷冻期为 1 天)。

解题思路：本题是一道动态规划的题目，我们可以使用 dp 数组来记录每一天的最大收益。dp[i][0] 表示第 i 天不持有股票的最大收益，dp[i][1] 表示第 i 天持有股票的最大收益，dp[i][2] 表示第 i 天处于冷冻期的最大收益。状态转移方程如下：

- dp[i][0] = max(dp[i-1][0], dp[i-1][2])，即第 i 天不持有股票的最大收益为前一天不持有股票或处于冷冻期的最大收益。
- dp[i][1] = max(dp[i-1][1], dp[i-1][0]-prices[i])，即第 i 天持有股票的最大收益为前一天持有股票或前一天不持有股票今天买入的最大收益。
- dp[i][2] = dp[i-1][1]+prices[i]，即第 i 天处于冷冻期的最大收益为前一天持有股票今天卖出的最大收益。

最终的答案为 max(dp[n-1][0], dp[n-1][2])，其中 n 为数组的长度。

解决方案：

```javascript
var maxProfit = function(prices) {
    const n = prices.length;
    if (n < 2) return 0;
    const dp = new Array(n).fill(0).map(() => new Array(3).fill(0));
    dp[0][0] = 0;
    dp[0][1] = -prices[0];
    dp[0][2] = 0;
    for (let i = 1; i < n; i++) {
        dp[i][0] = Math.max(dp[i-1][0], dp[i-1][2]);
        dp[i][1] = Math.max(dp[i-1][1], dp[i-1][0]-prices[i]);
        dp[i][2] = dp[i-1][1]+prices[i];
    }
    return Math.max(dp[n-1][0], dp[n-1][2]);
};
```

算法复杂度：时间复杂度为 O(n)，空间复杂度为 O(n)。