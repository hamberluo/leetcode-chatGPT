题目编号：93

题目：复原 IP 地址

难度：中等

考察范围：字符串、回溯算法

题干：给定一个只包含数字的字符串，复原它并返回所有可能的 IP 地址格式。

示例：
输入: "25525511135"
输出: ["255.255.11.135", "255.255.111.35"]

解题思路：回溯算法

将字符串分成四个部分，每个部分都是一个合法的数字，且每个部分的值在 0~255 之间。因此可以使用回溯算法，从左到右依次确定每个部分的值，如果当前部分的值合法，则继续递归下一部分，否则回溯到上一步重新选择。

解决方案：

```ruby
# @param {String} s
# @return {String[]}
def restore_ip_addresses(s)
  res = []
  backtrack(s, [], res)
  res
end

def backtrack(s, path, res)
  # 如果已经找到了四个部分，且字符串已经全部使用，则将结果加入到 res 中
  if path.size == 4 && s.empty?
    res << path.join('.')
    return
  end

  # 如果已经找到了四个部分，但字符串还有剩余，则直接返回
  return if path.size == 4 && !s.empty?

  # 从左到右依次确定每个部分的值
  (1..3).each do |i|
    # 如果当前部分的值不合法，则回溯到上一步重新选择
    next if i > s.size || (i > 1 && s[0] == '0') || s[0...i].to_i > 255

    # 递归下一部分
    path << s[0...i]
    backtrack(s[i..-1], path, res)
    path.pop
  end
end
```

算法复杂度：时间复杂度为 O(3^4)，空间复杂度为 O(4)。其中 3^4 表示每个部分最多有 3 种选择，4 表示最多有 4 个部分。