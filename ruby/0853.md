题目编号：853

题目：车队

难度：中等

考察范围：排序、贪心算法

题干：假设有一排车，它们朝着同一个方向行驶。给定一个数组 `position` 和一个数组 `speed`，其中 `position[i]` 是第 i 辆车的位置并且 `speed[i]` 是第 i 辆车的速度。两辆车 `i` 和 `j` 会发生碰撞当且仅当它们满足以下条件：

- 位置 `i` < 位置 `j`
- 如果车 `i` 最先碰到车 `j`，则速度 `i` > 速度 `j`

所有车都以恒定的速度向前移动，同时也可以选择不移动。车辆之间的碰撞会导致一些车停止移动。当一个车停止移动时，它会与它碰撞的下一辆车相遇并停止移动。给定一个初始车速为正整数的数组 `speed`，返回车队的数量。车队是一组在同一位置停止的车。

解题思路：首先，我们可以将车按照位置从左到右排序。然后，我们可以从右到左遍历每一辆车。如果当前车的速度比前一辆车的速度慢，那么它们一定会相撞。因此，我们可以将前一辆车的速度赋值给当前车，这样它们就会一起移动，直到它们碰到下一辆车或者到达终点。如果当前车的速度比前一辆车的速度快，那么它们不会相撞，因此它们不会成为同一个车队。最后，我们可以统计有多少个不同的速度，这样就可以得到车队的数量。

解决方案：

```ruby
def car_fleet(target, speed)
  n = target.size
  cars = (0...n).to_a.sort_by { |i| -target[i] }
  ans = 0
  while cars.any?
    p = cars.pop
    time = (target[p] - target[cars[-1]]) / (speed[p].to_f - speed[cars[-1]].to_f) rescue 0
    if time > 0 && time * speed[cars[-1]] + target[cars[-1]] >= target[p]
      next
    else
      ans += 1
    end
  end
  ans
end
```

算法复杂度：时间复杂度为 O(n\log n)，空间复杂度为 O(n)。