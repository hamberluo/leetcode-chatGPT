题目编号：91

题目：解码方法

难度：中等

考察范围：动态规划

题干：一条包含字母 A-Z 的消息通过以下方式进行了编码：

'A' -> 1
'B' -> 2
...
'Z' -> 26

给定一个只包含数字的非空字符串，请计算解码方法的总数。

解题思路：动态规划

对于字符串 s，我们可以定义一个数组 dp，其中 dp[i] 表示字符串 s 的前 i 个字符 s[0..i-1] 的解码方法总数。

考虑如何进行状态转移：

1. 如果 s[i-1] 是有效的单个数字，则 dp[i] 可以通过 dp[i-1] 转移而来，即：

   dp[i] += dp[i-1]

2. 如果 s[i-2] 和 s[i-1] 组成的数字在 10 到 26 之间，则 dp[i] 可以通过 dp[i-2] 转移而来，即：

   dp[i] += dp[i-2]

综上所述，状态转移方程为：

   dp[i] = dp[i-1] + dp[i-2]

需要注意的是，对于字符串 s 的前两个字符，需要特殊处理：

1. 如果 s[0] 是有效的单个数字，则 dp[1] = 1。

2. 如果 s[0] 和 s[1] 组成的数字在 10 到 26 之间，则 dp[1] = dp[2] = 1。

解决方案：

```ruby
def num_decodings(s)
  n = s.length
  dp = Array.new(n+1, 0)
  dp[0] = 1
  dp[1] = s[0] == '0' ? 0 : 1
  for i in 2..n
    if s[i-1] != '0'
      dp[i] += dp[i-1]
    end
    if s[i-2] == '1' || (s[i-2] == '2' && s[i-1] <= '6')
      dp[i] += dp[i-2]
    end
  end
  return dp[n]
end
```

算法复杂度：时间复杂度为 O(n)，空间复杂度为 O(n)。