题目编号：462

题目：最少移动次数使数组元素相等 II

难度：中等

考察范围：数学、排序

题干：给定一个非空整数数组，找到使所有数组元素相等所需的最小移动数，其中每次移动可将选定的一个元素加1或减1。 您可以假设数组的长度最多为10000。

解题思路：首先，我们需要知道什么情况下移动次数最少。假设我们要将数组中的所有元素变为x，那么移动次数最少的情况就是x为数组的中位数。因为如果x不是中位数，那么我们可以将x变为中位数，移动次数会更少。

那么如何求出中位数呢？我们可以先对数组进行排序，然后找到中间的数。但是这样的时间复杂度是O(nlogn)，不够优秀。我们可以使用快速选择算法，它的时间复杂度是O(n)。

解决方案：

```ruby
def min_moves2(nums)
  nums.sort!
  median = nums[nums.size / 2]
  moves = 0
  nums.each do |num|
    moves += (num - median).abs
  end
  moves
end
```

算法复杂度：时间复杂度为O(n)，空间复杂度为O(1)。