题目编号：892

题目：三维形体的表面积

难度：简单

考察范围：数组、数学

题干：给定一个 n * n 的网格，其中每个单元格的值表示该单元格中的正方体的高度。每个单元格最多有一块正方体。请计算整个网格的表面积。

解题思路：对于每个单元格，计算其贡献的表面积，然后将所有单元格的贡献相加即可。对于一个高度为 h 的单元格，其贡献的表面积为 2 + 4 * h，其中 2 表示顶部和底部的表面积，4 * h 表示四个侧面的表面积。但是，如果该单元格周围有其他单元格，则需要减去相邻两个单元格之间重叠的表面积。对于一个单元格 (i, j)，其上下左右四个方向的单元格分别为 (i-1, j)，(i+1, j)，(i, j-1)，(i, j+1)，如果这些单元格存在且高度为 h'，则需要减去 min(h, h') * 2。

解决方案：

```ruby
# @param {Integer[][]} grid
# @return {Integer}
def surface_area(grid)
    n = grid.length
    res = 0
    for i in 0...n
        for j in 0...n
            h = grid[i][j]
            if h > 0
                res += 2 + h * 4
                if i > 0
                    res -= [h, grid[i-1][j]].min * 2
                end
                if j > 0
                    res -= [h, grid[i][j-1]].min * 2
                end
            end
        end
    end
    return res
end
```

算法复杂度：时间复杂度为 O(n^2)，空间复杂度为 O(1)。