题目编号：260

题目：只出现一次的数字 III

难度：中等

考察范围：位运算

题干：给定一个整数数组 nums，其中恰好有两个元素只出现一次，其余所有元素均出现两次。 找出只出现一次的那两个元素。你可以按任意顺序返回答案。

解题思路：由于数组中只有两个元素出现一次，其余元素均出现两次，因此可以考虑将数组分成两个子数组，每个子数组中只包含一个出现一次的元素，其余元素均出现两次。对于这两个子数组，可以使用“异或”运算找出只出现一次的元素。

具体地，设两个只出现一次的元素为 x 和 y，对数组中所有元素进行一次异或运算，最终得到的结果即为 x 异或 y 的结果。由于 x 和 y 不相同，因此 x 异或 y 的结果必定不为 0，即在结果的二进制表示中至少存在一位为 1。该位为 1 表示在 x 和 y 的二进制表示中，x 和 y 在该位上一个为 0，另一个为 1。因此，可以根据数组中所有元素在该位上是 0 还是 1，将数组分成两个子数组。对于这两个子数组，分别计算异或和，则分别得到了 x 和 y。

解决方案：

```ruby
def single_number(nums)
  # 计算数组中所有元素的异或和
  xor = nums.reduce(:^)
  # 找到异或和中最低位的 1
  mask = xor & -xor
  # 将数组分成两个子数组，分别计算异或和
  x = y = 0
  nums.each do |num|
    if num & mask == 0
      x ^= num
    else
      y ^= num
    end
  end
  [x, y]
end
```

算法复杂度：时间复杂度为 O(n)，空间复杂度为 O(1)。