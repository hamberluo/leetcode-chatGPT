题目编号：458

题目：可怜的小猪

难度：困难

考察范围：数学、逻辑思维

题干：有 1000 只水桶，其中有且只有一桶装的有毒药，其它装的都是水。它们从外观看起来都一样。如果小猪喝了毒药，它会在 15 分钟内死亡。问题来了，至少需要多少只小猪才能在一小时内找出“有毒”水桶？ 

解题思路：这道题需要用到数学和逻辑思维。首先，我们需要知道一只小猪在 15 分钟内最多可以测试几桶水。因为小猪只有两种状态：死亡或存活，所以一只小猪最多可以测试 5 桶水（2 的 5 次方等于 32，超过 1000 桶水）。那么，如果有两只小猪，最多可以测试几桶水呢？答案是 25 桶水（5 的 2 次方等于 25）。同理，如果有三只小猪，最多可以测试几桶水呢？答案是 125 桶水（5 的 3 次方等于 125）。因此，我们可以得出结论：如果有 n 只小猪，最多可以测试 5 的 n 次方桶水。那么，我们只需要找到一个最小的 n，使得 5 的 n 次方大于等于 1000，就可以得到答案了。

解决方案：

```ruby
def poor_pigs(buckets, minutes_to_die, minutes_to_test)
  pigs = 0
  while (5 ** pigs) < buckets
    pigs += 1
  end
  pigs
end
```

算法复杂度：时间复杂度为 O(log n)，空间复杂度为 O(1)。