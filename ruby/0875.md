题目编号：875

题目：爱吃香蕉的珂珂

难度：中等

考察范围：二分查找

题干：

珂珂喜欢吃香蕉。这里有 N 堆香蕉，第 i 堆中有 piles[i] 根香蕉。警卫已经离开了这里，珂珂可以按照如下规则进行她的香蕉食用：

珂珂选择一堆香蕉，并将香蕉数量 K（1 <= K <= piles[i]）个均分成小份。
对于每个小份，珂珂都会吃掉其中的一份，而剩下的一份将会留给下一次。 
如果珂珂在吃某一份香蕉时发现没有剩下下一份了，她将不会再继续吃更多的香蕉。 
珂珂喜欢吃香蕉的速度 K 与她的食物量身体健康程度有关。具体来说，她能在 H 小时内将 K 根香蕉吃完，其中 H 为一个正整数，且 K <= piles[i]。

珂珂可以决定她吃香蕉的速度 K。每小时她最多能吃一堆香蕉，所以她可以选择任何一个堆吃其中的任意数量的香蕉。

请你返回她可以在 D 小时内吃掉所有香蕉的最小速度 K（K 为一个正整数）。

解题思路：

题目要求珂珂在 D 小时内吃完所有香蕉，因此我们可以使用二分查找来确定珂珂每小时吃香蕉的速度 K。

具体来说，我们可以先确定珂珂每小时吃香蕉的速度的上下界，即最慢的速度为 1，最快的速度为香蕉堆中香蕉数量的最大值。然后，我们可以通过二分查找来确定珂珂每小时吃香蕉的速度 K。

在二分查找的过程中，我们可以计算珂珂以速度 K 吃香蕉需要的时间，如果时间小于等于 D，则说明珂珂可以以速度 K 在 D 小时内吃完所有香蕉，此时我们可以将速度的上界缩小为 K，继续查找更小的速度；否则，说明珂珂以速度 K 在 D 小时内无法吃完所有香蕉，此时我们可以将速度的下界增大为 K+1，继续查找更大的速度。

最终，当速度的上界等于下界时，我们就找到了珂珂每小时吃香蕉的最小速度 K。

解决方案：

```ruby
def min_eating_speed(piles, d)
  left, right = 1, piles.max
  while left < right
    mid = (left + right) / 2
    if can_eat_all(piles, d, mid)
      right = mid
    else
      left = mid + 1
    end
  end
  left
end

def can_eat_all(piles, d, k)
  time = 0
  piles.each do |p|
    time += (p / k.to_f).ceil
  end
  time <= d
end
```

算法复杂度：时间复杂度为 O(NlogM)，其中 N 为香蕉堆的数量，M 为香蕉堆中香蕉数量的最大值。空间复杂度为 O(1)。