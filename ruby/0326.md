题目编号：326

题目：给定一个整数，写一个函数来判断它是否是 3 的幂次方。如果是，返回 true ；否则，返回 false 。

难度：简单

考察范围：数学、位运算

题干：

给定一个整数，写一个函数来判断它是否是 3 的幂次方。如果是，返回 true ；否则，返回 false 。

整数 n 是 3 的幂次方需满足：存在整数 x 使得 n == 3^x 。

解题思路：

题目要求判断一个数是否是 3 的幂次方，可以使用数学方法或位运算方法。

数学方法：如果一个数是 3 的幂次方，那么它一定可以被不断地除以 3 直到变成 1。因此，我们可以不断地将给定的数除以 3，直到不能再除为止。如果最后得到的数是 1，说明它是 3 的幂次方；否则，说明它不是 3 的幂次方。

位运算方法：如果一个数是 3 的幂次方，那么它的二进制表示中只有一个 1，且这个 1 出现在奇数位上（从右往左数）。例如，3 的二进制表示为 11，9 的二进制表示为 1001。因此，我们可以先判断一个数是否是 2 的幂次方，如果是，再判断它的二进制表示中 1 出现的位置是否正确。

解决方案：

数学方法：

```ruby
def is_power_of_three(n)
  return false if n <= 0
  while n % 3 == 0
    n /= 3
  end
  n == 1
end
```

位运算方法：

```ruby
def is_power_of_three(n)
  return false if n <= 0
  # 判断是否是 2 的幂次方
  return (n & (n - 1)) == 0 && (n & 0x55555555) != 0
end
```

算法复杂度：

数学方法的时间复杂度为 O(log3n)，空间复杂度为 O(1)。

位运算方法的时间复杂度为 O(1)，空间复杂度为 O(1)。