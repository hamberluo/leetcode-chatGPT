题目编号：972

题目：相等的有理数

难度：困难

考察范围：数学、字符串处理、哈希表

题干：给定一个字符串表达式 S，该表达式表示一个基本的计算表达式，其中每个操作数都是非负有理数，每个运算符都是 +、-、* 或 /，整个表达式不包括括号。保证表达式中所有的数字均为非负整数。我们需要将该表达式转化为一个有理数，该有理数需为最简形式。如果最终结果是一个整数，则将结果的分母设置为 1，否则请保证分子和分母没有公约数。最简形式指分子和分母的最大公约数为 1。

解题思路：将有理数转化为分数，然后进行计算。将分数转化为最简形式，即分子和分母的最大公约数为 1。最大公约数可以使用辗转相除法求解。

解决方案：

```ruby
def fraction_addition(expression)
  # 将所有分数加起来
  nums = expression.scan(/[-+]?\d+\/\d+/).map { |s| s.split('/').map(&:to_i) }
  lcm = nums.map(&:last).reduce(1, :lcm) # 最小公倍数
  sum = nums.reduce([0, lcm]) do |acc, (num, den)|
    acc[0] += num * (lcm / den) # 通分后的分子
    acc
  end
  # 化简分数
  gcd = sum[0].gcd(sum[1])
  [sum[0] / gcd, sum[1] / gcd]
end
```

算法复杂度：时间复杂度为 O(nlogn)，其中 n 为分数的个数，logn 为求最大公约数的时间复杂度。空间复杂度为 O(n)，存储了所有分数。